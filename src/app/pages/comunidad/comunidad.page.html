<ion-header class="ion-no-border">
  <ion-toolbar class="community-toolbar">
    <ion-buttons slot="start">
      <ion-menu-button class="retro-menu-btn"></ion-menu-button>
    </ion-buttons>

    <ion-title class="retro-title">COMUNIDAD</ion-title>

    <ion-buttons slot="end">
      <div class="spacer-btn"></div>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="retro-content">
  <div class="crt-lines"></div>

  <div class="main-layout">

    <div class="section-header">
      <h1 class="main-headline">TU VOZ EN EL SALÓN</h1>
      <p class="sub-headline">COMPARTE IDEAS, TRUCOS Y SUGERENCIAS</p>
    </div>

    <div class="comments-container">
      <ion-list class="retro-list">

        <div *ngIf="(comentarios | async)?.length === 0" class="empty-state">
          <ion-icon name="chatbubbles-outline"></ion-icon>
          <p>¡SÉ EL PRIMERO EN ESCRIBIR!</p>
        </div>

        <ion-item *ngFor="let comentario of comentarios | async" class="comment-item" lines="none">
          <div class="comment-bubble">
            <div class="comment-header">
              <span class="username">JUGADOR ANÓNIMO</span>
              <span class="date">{{ comentario.fecha?.toDate() | date:'shortDate' }}</span>
            </div>
            <p class="comment-text">
              {{ comentario.texto }}
            </p>
          </div>
        </ion-item>

      </ion-list>
    </div>

    <div class="input-area">

      <div *ngIf="mensajeError" class="chat-error-bubble slide-in-bottom">
        <ion-icon name="alert-circle"></ion-icon>
        <span>{{ mensajeError }}</span>
      </div>

      <div class="input-wrapper">
        <ion-input
          placeholder="Escribe tu mensaje..."
          [(ngModel)]="nuevoComentario"
          clearInput
          class="retro-input"
          (keyup.enter)="agregarComentario()"
        ></ion-input>

        <ion-button (click)="agregarComentario()" class="btn-send">
          <ion-icon name="send"></ion-icon>
        </ion-button>
      </div>
    </div>

  </div>
</ion-content>
