<ion-app>
  <ion-menu side="start" menuId="first" contentId="main" type="overlay" class="retro-menu">

    <ion-header class="ion-no-border">
      <ion-toolbar class="menu-toolbar">
        <ion-title class="menu-title">MENÚ PRINCIPAL</ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-content class="menu-content">
      <div class="crt-lines"></div>

      <div class="menu-layout">

        <div *ngIf="loggedIn && usuario" class="user-card-container">
          <div class="user-card">
            <div class="avatar-section">
              <img
                [src]="avatarUrl"
                (error)="onErrorImagen()"
                class="user-avatar"
              />
              <div class="online-badge"></div>
            </div>

            <div class="info-section">
              <h3 class="user-name">{{ getNombreDisplay() }}</h3>
              <p class="user-email">{{ getEmailDisplay() }}</p>
              <div class="status-text">
                <span class="dot">●</span> CONECTADO
              </div>
            </div>
          </div>

          <ion-menu-toggle auto-hide="false">
            <ion-button
              expand="block"
              fill="outline"
              class="btn-profile"
              routerLink="/perfil"
            >
              <ion-icon name="person-circle" slot="start"></ion-icon>
              VER PERFIL
            </ion-button>
          </ion-menu-toggle>
        </div>

        <div *ngIf="!loggedIn" class="guest-card-container">
          <div class="guest-card">
            <ion-icon name="lock-closed" class="lock-icon"></ion-icon>
            <p class="guest-msg">ACCESO RESTRINGIDO</p>
            <p class="guest-sub">INICIA SESIÓN PARA JUGAR</p>

            <ion-menu-toggle auto-hide="false">
              <ion-button
                expand="block"
                class="btn-login"
                routerLink="/login"
              >
                INICIAR SESIÓN
              </ion-button>
            </ion-menu-toggle>
          </div>
        </div>

        <ion-list class="nav-list">
          <ion-menu-toggle auto-hide="false" *ngFor="let item of elementos">
            <ion-item
              [routerLink]="item.ruta"
              routerLinkActive="selected"
              detail="false"
              class="nav-item"
              lines="none"
            >
              <ion-icon [name]="item.icono" slot="start"></ion-icon>
              <ion-label>{{ item.nombre }}</ion-label>
              <ion-icon name="caret-back" slot="end" class="arrow-indicator"></ion-icon>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>

        <div class="menu-footer">
          <div *ngIf="loggedIn" class="logout-area">
            <ion-menu-toggle auto-hide="false">
              <ion-button
                expand="block"
                class="btn-logout"
                (click)="logout()"
              >
                <ion-icon name="power" slot="start"></ion-icon>
                CERRAR SESIÓN
              </ion-button>
            </ion-menu-toggle>
          </div>

          <div class="credits">
            <p class="copyright">FACE-BOMB © 2024</p>
            <p class="slogan">UNA AVENTURA DE DULCES Y CAOS</p>
          </div>
        </div>

      </div>
    </ion-content>
  </ion-menu>

  <ion-router-outlet id="main"></ion-router-outlet>
</ion-app>
